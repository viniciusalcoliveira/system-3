<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login - Engemec</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link rel="stylesheet" href="css/login.css">
</head>
<body>

  <div class="login-box">

    <img src="image/logo engemec.PNG" alt="Logo Engemec" class="mx-auto mb-4 h-20" />

    <!-- CONTAINER LOGIN -->
    <div id="login-form">
      <h2 class="text-2xl font-bold text-gray-800 mb-2">Bem-vindo à Engemec fleet maintenance</h2>
      <p class="text-sm text-gray-600 mb-6">Acesse sua conta para continuar</p>

      <div class="space-y-4 text-left">
        <div class="relative">
          <i class="ph ph-user input-icon"></i>
          <input
            type="text"
            id="loginUsuario"
            placeholder="Usuário"
            class="form-input w-full py-3 px-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-600 focus:outline-none"
          />
        </div>
        <div class="relative">
          <i class="ph ph-lock-key input-icon"></i>
          <input
            type="password"
            id="loginSenha"
            placeholder="Senha"
            class="form-input w-full py-3 px-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-600 focus:outline-none"
          />
        </div>

        <button
          onclick="fazerLogin()"
          class="btn-primary w-full text-white font-semibold py-3 rounded-xl flex items-center justify-center"
        >
          <i class="ph ph-sign-in mr-2"></i> Entrar
        </button>

        <div id="erroLogin" class="text-sm text-red-600 text-center mt-2"></div>

        <p
          class="text-sm mt-4 text-center link-button"
          onclick="mostrarCadastro()"
          title="Clique para criar uma conta"
        >
          Não tem cadastro? Cadastre-se aqui
        </p>
      </div>
    </div>

    <!-- CONTAINER CADASTRO -->
    <div id="cadastro-form" class="hidden">
      <h2 class="text-2xl font-bold text-gray-800 mb-2">Cadastro de Usuário</h2>

      <div class="space-y-4 text-left">
        <div class="relative">
          <i class="ph ph-user input-icon"></i>
          <input
            type="text"
            id="cadastroUsuario"
            placeholder="Usuário"
            class="form-input w-full py-3 px-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-600 focus:outline-none"
          />
        </div>
        <div class="relative">
          <i class="ph ph-lock-key input-icon"></i>
          <input
            type="password"
            id="cadastroSenha"
            placeholder="Senha"
            class="form-input w-full py-3 px-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-600 focus:outline-none"
          />
        </div>
        <div>
          <label for="tipoUsuario" class="block mb-1 font-semibold">Tipo de Usuário:</label>
          <select
            id="tipoUsuario"
            class="w-full rounded-xl border border-gray-300 py-2 px-3 focus:ring-2 focus:ring-blue-600 focus:outline-none"
            onchange="verificarTipoUsuario()"
          >
            <option value="user" selected>Usuário</option>
            <option value="admin">Administrador</option>
          </select>
        </div>

        <!-- Campos adicionais para admin, inicialmente escondidos -->
        <div id="codigoAdminContainer" class="hidden">
          <label for="codigoAdmin" class="block mb-1 font-semibold">Código Fixo do Admin:</label>
          <input
            type="password"
            id="codigoAdmin"
            placeholder="Digite o código fixo"
            class="form-input w-full py-3 px-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-600 focus:outline-none"
          />
        </div>

        <div id="codigoDinamicoContainer" class="hidden">
          <label class="block mb-1 font-semibold">Token Dinâmico:</label>
          <div class="flex items-center gap-2">
            <div
              id="tokenGerado"
              class="bg-gray-200 rounded-xl py-3 px-4 select-all font-mono tracking-widest text-lg"
              title="Token gerado automaticamente"
              style="user-select: all;"
            >
              <!-- Token será inserido aqui -->
            </div>
            <button type="button" onclick="gerarToken()" class="btn-primary px-4 py-2 rounded-xl text-white font-semibold">Gerar</button>
          </div>
          <input
            type="text"
            id="codigoDinamico"
            placeholder="Digite o token acima"
            class="form-input w-full mt-2 py-3 px-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-600 focus:outline-none"
          />
        </div>

        <button
          onclick="fazerCadastro()"
          class="btn-primary w-full text-white font-semibold py-3 rounded-xl flex items-center justify-center"
        >
          <i class="ph ph-user-plus mr-2"></i> Cadastrar
        </button>

        <div id="erroCadastro" class="text-sm text-red-600 text-center mt-2"></div>
        <div id="sucessoCadastro" class="text-sm text-green-600 text-center mt-2"></div>

        <p
          class="text-sm mt-4 text-center link-button"
          onclick="mostrarLogin()"
          title="Voltar para o login"
        >
          Voltar para o login
        </p>
      </div>
    </div>

  </div>


  <script src="js/login.js" defer></script>
</body>
</html>
