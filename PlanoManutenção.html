<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Escolha seu Plano de Manutenção - EFM Frotas</title>
    <!-- Google Fonts: Poppins for modern typography -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <!-- Tailwind CSS CDN for utility-first styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Phosphor Icons for modern and clean iconography -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f4f8; /* Light background for a clean look */
            color: #2c3e50; /* Darker text for readability */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased; /* Smoother font rendering */
            -moz-osx-font-smoothing: grayscale;
        }

        /* Custom animation for dropdown fade-in */
        @keyframes fadeIn {
            from { opacity: 0; transform: scaleY(0.9) translateY(-10px); }
            to { opacity: 1; transform: scaleY(1) translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
            transform-origin: top;
        }

        /* Custom scrollbar styling for a consistent look */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: rgba(11, 61, 145, 0.6); /* Semi-transparent primary blue */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(11, 61, 145, 0.1); /* Lighter track */
        }

        .maintenance-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2.5rem;
            background-color: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease-in-out;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .maintenance-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            border-color: #3b82f6; /* Blue border on hover */
        }
        .maintenance-card .icon-wrapper {
            background-color: #bfdbfe; /* Light blue circle */
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        .maintenance-card .icon-wrapper i {
            color: #1d4ed8; /* Darker blue icon */
            font-size: 3.5rem;
        }
        .maintenance-card h2 {
            font-size: 1.75rem; /* text-3xl */
            font-weight: 700; /* font-bold */
            color: #1e3a8a; /* Blue-900 */
            margin-bottom: 0.75rem;
        }
        .maintenance-card p {
            font-size: 1.125rem; /* text-lg */
            color: #4b5563; /* Gray-700 */
            line-height: 1.5;
        }
    </style>
</head>
<body class="overflow-x-hidden">

<header class="bg-blue-800 text-white p-4 flex flex-col md:flex-row items-center justify-between shadow-lg sticky top-0 z-50 rounded-b-xl">
    <div class="font-extrabold text-3xl tracking-wider select-none mb-4 md:mb-0" tabindex="0">
        <span class="text-white">EFM</span><span class="text-yellow-400"> FROTAS</span>
    </div>

    <nav class="flex flex-wrap gap-x-4 gap-y-2 items-center justify-center" role="navigation" aria-label="Menu principal">

        <a href="dashboard.html" class="menu-link text-white font-semibold text-base py-2 px-2 relative whitespace-nowrap border-b-4 border-transparent hover:text-yellow-300 hover:border-yellow-300 transition">
            Dashboard
        </a>

        <div class="relative dropdown">
            <button onclick="toggleDropdown('menu-configuracoes', event)" class="menu-link text-white font-semibold text-base py-2 px-2 hover:text-yellow-300 hover:border-yellow-300 border-b-4 border-transparent transition">
                Configurações <i class="ph ph-caret-down ml-1"></i>
            </button>
            <div id="menu-configuracoes" class="dropdown-content hidden absolute top-12 left-0 bg-white rounded-xl shadow-xl min-w-[220px] flex-col z-[9999] overflow-hidden">
                <a href="CadastroVeiculos.html" class="dropdown-item">Cadastro de Veículos</a>
                <a href="" class="dropdown-item">Cadastro de Marcas</a>

            </div>
        </div>

        <div class="relative dropdown">
            <button onclick="toggleDropdown('menu-plano', event)" class="menu-link text-white font-semibold text-base py-2 px-2 hover:text-yellow-300 hover:border-yellow-300 border-b-4 border-transparent transition">
                Plano de Manutenção <i class="ph ph-caret-down ml-1"></i>
            </button>
            <div id="menu-plano" class="dropdown-content hidden absolute top-12 left-0 bg-white rounded-xl shadow-xl min-w-[220px] flex-col z-[9999] overflow-hidden">
                <a href="pmp.html" class="dropdown-item">PMP - Preventiva</a>
                <a href="pl.html" class="dropdown-item">PL - Lubrificação</a>
            </div>
        </div>

        <div class="relative dropdown">
            <button onclick="toggleDropdown('menu-os', event)" class="menu-link text-white font-semibold text-base py-2 px-2 hover:text-yellow-300 hover:border-yellow-300 border-b-4 border-transparent transition">
                Ordem de Serviço <i class="ph ph-caret-down ml-1"></i>
            </button>
            <div id="menu-os" class="dropdown-content hidden absolute top-12 left-0 bg-white rounded-xl shadow-xl min-w-[220px] flex-col z-[9999] overflow-hidden">
                <a href="agendamento.html" class="dropdown-item">Gerar Ordem de Serviço</a>
            </div>
        </div>

        <div class="relative dropdown">
            <button onclick="toggleDropdown('menu-gerenciamento', event)" class="menu-link text-white font-semibold text-base py-2 px-2 hover:text-yellow-300 hover:border-yellow-300 border-b-4 border-transparent transition">
                Gerenciamento <i class="ph ph-caret-down ml-1"></i>
            </button>
            <div id="menu-gerenciamento" class="dropdown-content hidden absolute top-12 left-0 bg-white rounded-xl shadow-xl min-w-[220px] flex-col z-[9999] overflow-hidden">
                <a href="controle.html" class="dropdown-item">Controle</a>
                <a href="index.html" class="dropdown-item">Visão Geral de Frota</a>
            </div>
        </div>

        <a href="seguranca.html" class="menu-link text-white font-semibold text-base py-2 px-2 hover:text-yellow-300 hover:border-yellow-300 border-b-4 border-transparent transition">
            Segurança
        </a>

        <a href="#" onclick="logout()" class="menu-link text-white font-semibold text-base py-2 px-2 hover:text-yellow-300 hover:border-yellow-300 border-b-4 border-transparent transition">
            Sair
        </a>
    </nav>
</header>

<style>
    .active-menu {
        color: #facc15 !important; /* yellow-300 */
        border-bottom: 4px solid #facc15 !important; /* yellow-300 */
    }

    .dropdown-item {
        padding: 0.75rem 1.5rem;
        color: #374151; /* gray-700 */
        font-weight: 500;
        white-space: nowrap;
    }

    .dropdown-item:hover {
        background-color: #eff6ff; /* blue-50 */
        color: #1e40af; /* blue-800 */
    }
</style>

<script>
    function toggleDropdown(menuId, event) {
        event.stopPropagation();
        document.querySelectorAll('.dropdown-content').forEach(menu => menu.classList.add('hidden'));
        document.getElementById(menuId).classList.toggle('hidden');
    }

    document.addEventListener('click', function() {
        document.querySelectorAll('.dropdown-content').forEach(menu => menu.classList.add('hidden'));
    });

    // Função para ativar o item de menu correto
    function activateMenuItem() {
        const currentPath = window.location.pathname.split('/').pop(); // Pega o nome do arquivo da URL (ex: "dashboard.html")

        document.querySelectorAll('.menu-link, .dropdown-item').forEach(item => {
            // Remove a classe 'active-menu' de todos os itens primeiro
            item.classList.remove('active-menu');

            // Pega o href do item
            const itemHref = item.getAttribute('href');

            // Verifica se o href existe e se o caminho atual corresponde ao href
            if (itemHref && itemHref.endsWith(currentPath)) {
                item.classList.add('active-menu');

                // Se o item ativo for um dropdown-item, também queremos "ativar" o botão pai do dropdown
                let parentDropdown = item.closest('.dropdown');
                if (parentDropdown) {
                    let dropdownButton = parentDropdown.querySelector('.menu-link');
                    if (dropdownButton) {
                        dropdownButton.classList.add('active-menu');
                    }
                }
            }
        });
    }

    // Chama a função quando a página é carregada
    document.addEventListener('DOMContentLoaded', activateMenuItem);

    // Adiciona o evento de clique para que, ao navegar, a classe 'active-menu' seja aplicada imediatamente
    document.querySelectorAll('.menu-link, .dropdown-item').forEach(item => {
        item.addEventListener('click', function() {
            // Remove a classe 'active-menu' de todos os itens ao clicar em um novo item
            document.querySelectorAll('.menu-link, .dropdown-item').forEach(i => i.classList.remove('active-menu'));
            // Adiciona a classe 'active-menu' ao item clicado
            this.classList.add('active-menu');

            // Se o item clicado for um dropdown-item, ativa também o botão pai do dropdown
            let parentDropdown = this.closest('.dropdown');
            if (parentDropdown) {
                let dropdownButton = parentDropdown.querySelector('.menu-link');
                if (dropdownButton) {
                    dropdownButton.classList.add('active-menu');
                }
            }
        });
    });
// terminando header
</script>

    <main class="max-w-7xl mx-auto my-12 px-4 md:px-6 flex-grow">
        <h1 class="font-extrabold text-5xl mb-10 text-center text-blue-900 tracking-wide select-none">Escolha seu Plano de Manutenção</h1>
        <p class="text-lg text-gray-700 mb-8 text-center">Selecione o tipo de plano de manutenção que deseja visualizar ou gerenciar.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-8 mt-10 justify-items-center">
            <a href="PL.html" class="maintenance-card group" tabindex="0">
                <div class="icon-wrapper">
                    <i class="ph ph-oil-can"></i>
                </div>
                <h2>Plano de Lubrificação (PL)</h2>
                <p>Detalhes e procedimentos para a lubrificação de componentes do veículo.</p>
            </a>

            <a href="PMP.HTML" class="maintenance-card group" tabindex="0">
                <div class="icon-wrapper">
                    <i class="ph ph-wrench"></i>
                </div>
                <h2>Plano de Manutenção Preventiva (PMP)</h2>
                <p>Ações programadas para evitar falhas e manter o bom funcionamento do veículo.</p>
            </a>
            <!-- Removido o Plano de Inspeção para ter apenas 2 opções, conforme solicitado indiretamente -->
        </div>
    </main>

    <script>
        // --- SEGURANÇA DE LOGIN ---
        // Redireciona para a página de login se o usuário não estiver 'logado'.
        if (localStorage.getItem('logado') !== 'true') {
            if (typeof __app_id === 'undefined') {
                window.location.href = 'index.html'; // Redireciona para a página de login
            } else {
                console.log("Running in Canvas environment, bypassing login redirect.");
                localStorage.setItem('logado', 'true');
            }
        }

        // Função para realizar logout.
        function logout() {
            localStorage.removeItem('logado');
            if (typeof __app_id === 'undefined') {
                window.location.href = 'index.html'; // Redireciona para a página de login
            } else {
                console.log("Running in Canvas environment, logout simulated.");
            }
        }

        // --- FUNCIONALIDADE DE DROPDOWN MENUS (HEADER) ---
        function toggleDropdown(id, event) {
            event.preventDefault();
            event.stopPropagation();

            const menu = document.getElementById(id);
            const isVisible = menu.style.display === 'flex';

            document.querySelectorAll('.dropdown-content').forEach(m => {
                if (m !== menu) {
                    m.style.display = 'none';
                    if (m.previousElementSibling) {
                        m.previousElementSibling.setAttribute('aria-expanded', 'false');
                        m.classList.remove('animate-fade-in');
                    }
                }
            });

            if (!isVisible) {
                menu.style.display = 'flex';
                menu.style.flexDirection = 'column';
                menu.classList.add('animate-fade-in');
                if (menu.previousElementSibling) {
                    menu.previousElementSibling.setAttribute('aria-expanded', 'true');
                }
            } else {
                menu.style.display = 'none';
                menu.classList.remove('animate-fade-in');
                if (menu.previousElementSibling) {
                    menu.previousElementSibling.setAttribute('aria-expanded', 'false');
                }
            }
        }

        document.addEventListener('click', (event) => {
            const isClickInsideDropdown = event.target.closest('.dropdown');
            if (!isClickInsideDropdown) {
                document.querySelectorAll('.dropdown-content').forEach(menu => {
                    if (menu.style.display === 'flex') {
                        menu.style.display = 'none';
                        menu.classList.remove('animate-fade-in');
                        if (menu.previousElementSibling) {
                            menu.previousElementSibling.setAttribute('aria-expanded', 'false');
                        }
                    }
                });
            }
        });

        // Ensure functions are globally accessible
        window.toggleDropdown = toggleDropdown;
        window.logout = logout;
    </script>
</body>
</html>
